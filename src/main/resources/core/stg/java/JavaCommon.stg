/*
 * Copyright 2012-2016 ISP RAS (http://www.ispras.ru)
 * 
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */

/**
 * The JavaCommon string template group contains string templates that help generate
 * java code. Those templates should be used by all MicroTESK's code generators
 * that generate code in java.  
 */
group JavaCommon;

/** 
 * Header for generated Java files.
 *
 * @param file The name of the specification file from which the model (or its part) is generated.
 */
header(file) ::= <<
/*
 * Copyright (c) ISP RAS (http://www.ispras.ru)
 * All Rights Reserved
 *
 * Ivannikov Institute for System Programming of the Russian Academy of Sciences (ISP RAS)
 * 25 Alexander Solzhenitsyn st., Moscow, 109004, Russia
 * http://www.ispras.ru
 *
 * The present file was automatically generated on the basis of formal specifications.
 * It is distributed under the same terms and conditions as the derived specifications.
 *
 * N.B. PLEASE DO NOT MODIFY THIS FILE.
 */<\n>
>>

class_javadoc(name) ::= <<
/**
 * The {@code <name>} class is automatically generated by MicroTESK.
 *
 * @author \<a href="mailto:microtesk-support@ispras.ru">MicroTESK\</a>
 */
>>

/** 
 * Package declaration.
 *
 * @param pack The name of the package the generated class is located in. 
 */
package(pack) ::= "package <pack>;<\n>"

/**
 * Import declarations.
 *
 * @param names Full names of classes to be imported.
 */
imports(names) ::= <<
import <names; separator=";\nimport ">;<\n>
>>

/**
 * Static import declarations.
 *
 * @param names Full names of classes static members of which we want to import.
 */
static_imports(names) ::= <<
import static <names; separator=".*;\nimport static ">.*;<\n>
>>

/** 
 * Class declaration
 */
class(modifs, name, ext, impls, members) ::= <<
<class_ext(modifs, name, ext, impls, members, false)>
>>

class_ext(modifs, name, ext, impls, members, instance) ::= <<
<modif_list(modifs)>class <name><base_class(ext)><intf_list(impls)> {
  <if(instance)><singleton(name, instance)><endif>
  <members; separator="\n">
}
>>

class_const(type, name, value) ::= <<
public static final <type> <name> = <value>;
>>

class_string_const(type, name, value) ::= <<
public static final <type> <name> = "<value>";
>>

modif_list(modifs) ::= <<
<if(modifs)><modifs; separator=" "><\ ><endif>
>>

base_class(ext) ::= <<
<if(ext)> extends <ext><endif>
>>

intf_list(impls) ::= <<
<if(impls)> implements <impls; separator=", "><endif>
>>

singleton(type, name) ::= <<
private static <type> <name> = null;

public static <type> get() {
  if (null == <name>) {
    <name> = new <type>();
  }
  return <name>;
}<\n>
>>

source_file(file, pack, name, ext, impls, imps, simps, members, instance) ::= <<
<header(file)>
<package(pack)>
<if(simps)><static_imports(simps)><endif>
<if(imps)><imports(imps)><endif>
<class_javadoc(name)>
<class_ext(["public", "final"],
       name,
       ext,
       impls,
       members,
       instance)><\n>
>>
